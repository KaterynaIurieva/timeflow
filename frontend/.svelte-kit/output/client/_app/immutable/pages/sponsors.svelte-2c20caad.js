import{S as j,i as F,s as G,r as J,a as I,w as m,u as M,c as N,x as c,b as h,y as _,v as q,f as d,t as g,h as v,B as b,o as P,Q as O,Y as D,Z as E}from"../chunks/index-f831fcd5.js";import{G as z,h as A,d as H,R as B,C as y,A as Q,B as V}from"../chunks/autocomplete-92be2335.js";import{E as Y}from"../chunks/EditableDatatable-30d45017.js";import{T as L}from"../chunks/TextInput-b96bf048.js";import"../chunks/index-c5ea608b.js";import"../chunks/ChevronDown-4ddb42be.js";import"../chunks/Close-76fb22ca.js";import"../chunks/EditOff-8afe7c05.js";function Z(u){let e,s,t;function r(a){u[10](a)}let n={placeholder:"new sponsor's full name"};return u[3]!==void 0&&(n.value=u[3]),e=new L({props:n}),O.push(()=>D(e,"value",r)),{c(){m(e.$$.fragment)},l(a){c(e.$$.fragment,a)},m(a,l){_(e,a,l),t=!0},p(a,l){const i={};!s&&l&8&&(s=!0,i.value=a[3],E(()=>s=!1)),e.$set(i)},i(a){t||(d(e.$$.fragment,a),t=!0)},o(a){g(e.$$.fragment,a),t=!1},d(a){b(e,a)}}}function K(u){let e,s,t;function r(a){u[11](a)}let n={placeholder:"new sponsor's short name"};return u[4]!==void 0&&(n.value=u[4]),e=new L({props:n}),O.push(()=>D(e,"value",r)),{c(){m(e.$$.fragment)},l(a){c(e.$$.fragment,a)},m(a,l){_(e,a,l),t=!0},p(a,l){const i={};!s&&l&16&&(s=!0,i.value=a[4],E(()=>s=!1)),e.$set(i)},i(a){t||(d(e.$$.fragment,a),t=!0)},o(a){g(e.$$.fragment,a),t=!1},d(a){b(e,a)}}}function W(u){let e;return{c(){e=J("Submit")},l(s){e=M(s,"Submit")},m(s,t){h(s,e,t)},d(s){s&&v(e)}}}function X(u){let e,s;return e=new V({props:{size:"small",kind:"primary",$$slots:{default:[W]},$$scope:{ctx:u}}}),e.$on("click",u[8]),{c(){m(e.$$.fragment)},l(t){c(e.$$.fragment,t)},m(t,r){_(e,t,r),s=!0},p(t,r){const n={};r&65536&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(d(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){b(e,t)}}}function x(u){let e,s,t,r,n,a,l,i,f;e=new y({props:{$$slots:{default:[Z]},$$scope:{ctx:u}}}),t=new y({props:{$$slots:{default:[K]},$$scope:{ctx:u}}});function p(o){u[12](o)}let w={options:u[1],selectDisplay:"name",placeholder:"search client"};return u[5]!==void 0&&(w.selectedOption=u[5]),n=new Q({props:w}),O.push(()=>D(n,"selectedOption",p)),i=new y({props:{$$slots:{default:[X]},$$scope:{ctx:u}}}),{c(){m(e.$$.fragment),s=I(),m(t.$$.fragment),r=I(),m(n.$$.fragment),l=I(),m(i.$$.fragment)},l(o){c(e.$$.fragment,o),s=N(o),c(t.$$.fragment,o),r=N(o),c(n.$$.fragment,o),l=N(o),c(i.$$.fragment,o)},m(o,$){_(e,o,$),h(o,s,$),_(t,o,$),h(o,r,$),_(n,o,$),h(o,l,$),_(i,o,$),f=!0},p(o,$){const R={};$&65544&&(R.$$scope={dirty:$,ctx:o}),e.$set(R);const k={};$&65552&&(k.$$scope={dirty:$,ctx:o}),t.$set(k);const T={};$&2&&(T.options=o[1]),!a&&$&32&&(a=!0,T.selectedOption=o[5],E(()=>a=!1)),n.$set(T);const C={};$&65536&&(C.$$scope={dirty:$,ctx:o}),i.$set(C)},i(o){f||(d(e.$$.fragment,o),d(t.$$.fragment,o),d(n.$$.fragment,o),d(i.$$.fragment,o),f=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),g(n.$$.fragment,o),g(i.$$.fragment,o),f=!1},d(o){b(e,o),o&&v(s),b(t,o),o&&v(r),b(n,o),o&&v(l),b(i,o)}}}function ee(u){let e,s,t,r,n;function a(p){u[13](p)}function l(p){u[14](p)}function i(p){u[15](p)}let f={headers:[{key:"id",value:"ID"},{key:"sponsor_name",value:"FULL SPONSOR'S NAME"},{key:"sponsor_short_name",value:"SHORT SPONSOR'S NAME"},{key:"client_name",value:"CLIENT'S NAME"},{key:"is_active",value:"IS ACTIVE"}],rows:u[0],onUpdate:u[9]};return u[2]!==void 0&&(f.selectedRowIds=u[2]),u[6]!==void 0&&(f.upData=u[6]),u[7]!==void 0&&(f.columnsToEdit=u[7]),e=new Y({props:f}),O.push(()=>D(e,"selectedRowIds",a)),O.push(()=>D(e,"upData",l)),O.push(()=>D(e,"columnsToEdit",i)),{c(){m(e.$$.fragment)},l(p){c(e.$$.fragment,p)},m(p,w){_(e,p,w),n=!0},p(p,w){const o={};w&1&&(o.rows=p[0]),!s&&w&4&&(s=!0,o.selectedRowIds=p[2],E(()=>s=!1)),!t&&w&64&&(t=!0,o.upData=p[6],E(()=>t=!1)),!r&&w&128&&(r=!0,o.columnsToEdit=p[7],E(()=>r=!1)),e.$set(o)},i(p){n||(d(e.$$.fragment,p),n=!0)},o(p){g(e.$$.fragment,p),n=!1},d(p){b(e,p)}}}function te(u){let e,s;return e=new y({props:{$$slots:{default:[ee]},$$scope:{ctx:u}}}),{c(){m(e.$$.fragment)},l(t){c(e.$$.fragment,t)},m(t,r){_(e,t,r),s=!0},p(t,r){const n={};r&65733&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(d(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){b(e,t)}}}function ne(u){let e,s,t,r;return e=new B({props:{$$slots:{default:[x]},$$scope:{ctx:u}}}),t=new B({props:{$$slots:{default:[te]},$$scope:{ctx:u}}}),{c(){m(e.$$.fragment),s=I(),m(t.$$.fragment)},l(n){c(e.$$.fragment,n),s=N(n),c(t.$$.fragment,n)},m(n,a){_(e,n,a),h(n,s,a),_(t,n,a),r=!0},p(n,a){const l={};a&65594&&(l.$$scope={dirty:a,ctx:n}),e.$set(l);const i={};a&65733&&(i.$$scope={dirty:a,ctx:n}),t.$set(i)},i(n){r||(d(e.$$.fragment,n),d(t.$$.fragment,n),r=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),r=!1},d(n){b(e,n),n&&v(s),b(t,n)}}}function se(u){let e,s=JSON.stringify(u[6])+"",t,r,n,a;return n=new z({props:{$$slots:{default:[ne]},$$scope:{ctx:u}}}),{c(){e=J("upData "),t=J(s),r=I(),m(n.$$.fragment)},l(l){e=M(l,"upData "),t=M(l,s),r=N(l),c(n.$$.fragment,l)},m(l,i){h(l,e,i),h(l,t,i),h(l,r,i),_(n,l,i),a=!0},p(l,[i]){(!a||i&64)&&s!==(s=JSON.stringify(l[6])+"")&&q(t,s);const f={};i&65791&&(f.$$scope={dirty:i,ctx:l}),n.$set(f)},i(l){a||(d(n.$$.fragment,l),a=!0)},o(l){g(n.$$.fragment,l),a=!1},d(l){l&&v(e),l&&v(t),l&&v(r),b(n,l)}}}function ae(u,e,s){let t=[{}],r=[],n=[],a,l,i={},f=[],p={sponsor_name:"input",sponsor_short_name:"input",client_name:{input:"autocomplete",selectDisplay:"client_name",options:r,placeholder:"client's name"},is_active:"toggle"};n===[]&&(f=[]),P(async()=>{s(0,t=await A())}),P(async()=>{s(1,r=await H()),s(7,p.client_name.options=r,p)});async function w(){await fetch("http://localhost:8002/api/sponsors/",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({client_id:i.id,name:a,short_name:l,is_active:!0,created_at:Date.now(),updated_at:Date.now()})}),s(0,t=await A())}async function o(){await fetch("http://localhost:8002/api/sponsors/bulk_update",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(f)}),s(0,t=await A()),s(6,f=[]),s(2,n=[])}function $(S){a=S,s(3,a)}function R(S){l=S,s(4,l)}function k(S){i=S,s(5,i)}function T(S){n=S,s(2,n)}function C(S){f=S,s(6,f)}function U(S){p=S,s(7,p)}return[t,r,n,a,l,i,f,p,w,o,$,R,k,T,C,U]}class me extends j{constructor(e){super(),F(this,e,ae,se,G,{})}}export{me as default};
